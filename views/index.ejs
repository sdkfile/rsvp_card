<script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://raw.githubusercontent.com/sdkfile/rsvp_card/master/views/js/jquery.magnific-popup.min.js"></script>

<%- include('./partials/head_invite') %>

<script>
  
  $(document).ready(function($){
    $('.image-popup-vertical-fit').magnificPopup({
      type: 'image',
      mainClass: 'mfp-with-zoom', 
      gallery:{
          enabled:true
        },

      zoom: {
        enabled: true, 

        duration: 300, // duration of the effect, in milliseconds
        easing: 'ease-in-out', // CSS transition easing function

        opener: function(openerElement) {

          return openerElement.is('img') ? openerElement : openerElement.find('img');
      }
    }
    });
  });
</script>
<body>
  <div id="loading-bar" style="
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: 0.3s;
    z-index: 300;
  ">
    <img src="https://raw.githubusercontent.com/sdkfile/rsvp_card/master/views/source/svg/loading-heart.svg" style="transition: all 0.3s ease 0s; width: 200px;" />
  </div>
  <div class="dots"></div>
  <div id="cover" class="wrapper">
    <div class="container">
      <div class="card">
        <div class="card-locator">
          <div style="padding-top: 45px; padding-bottom: 30px">
            <h2 id="title_ko">김성구, 이예지의 결혼식에 초대합니다!</h2>
            <h3 id="title_en">Yeji Lee & Seonggu Kim: We're getting married!</h3>
          </div>
          <hr>
          <div style="padding-top: 10px; padding-bottom: 20px">
            <h3>2022년 10월 15일 토요일 오후 12시</h3>
            <p>12PM, Saturday, October 15th, 2022</p>
            <h3>중구 명동길 61, 로얄호텔 서울</h3>
            <p>Royal Hotel Seoul, 61, Myeongdong-gil, Jung-gu</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="calendar" class="wrapper">
    <div class="target"></div>
  </div>
  
  <div id="photo_album" class="wrapper">
    <section class="img-gallery-magnific">
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://images.unsplash.com/photo-1470770841072-f978cf4d019e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1500&q=80" title="9.jpg">
          <img src="https://images.unsplash.com/photo-1470770841072-f978cf4d019e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1500&q=80" alt="9.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/900/?random" title="10.jpg">
          <img src="https://unsplash.it/900/?random" alt="10.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/902" title="3.jpg">
          <img src="https://unsplash.it/902/" alt="3.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/901" title="4.jpg">
          <img src="https://unsplash.it/901" alt="4.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/888/?random" title="1.jpg">
          <img src="https://unsplash.it/888/?random" alt="1.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/931/?random" title="2.jpg">
          <img src="https://unsplash.it/931/?random" alt="2.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/908/?random" title="5.jpg">
          <img src="https://unsplash.it/908/?random" alt="5.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/978/?random" title="6.jpg">
          <img src="https://unsplash.it/978/?random" alt="6.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/857/?random" title="7.jpg">
          <img src="https://unsplash.it/857/?random" alt="7.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/905/?random" title="8.jpg">
          <img src="https://unsplash.it/905/?random" alt="8.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/1230/?random" title="12.jpg">
          <img src="https://unsplash.it/1230/?random" alt="12.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/800/?random" title="13.jpg">
          <img src="https://unsplash.it/800/?random" alt="13.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/930/?random" title="14.jpg">
          <img src="https://unsplash.it/930/?random" alt="14.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/999/?random" title="15.jpg">
          <img src="https://unsplash.it/999/?random" alt="15.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
      <div class="magnific-img">
        <a class="image-popup-vertical-fit" href="https://unsplash.it/897/?random" title="16.jpg">
          <img src="https://raw.githubusercontent.com/sdkfile/rsvp_card/master/views/source/pic/invitation.jpeg" alt="16.jpg" />
          <i class="fa fa-search-plus" aria-hidden="true"></i>
        </a>
      </div>
    </section>
  </div>
  <div id="map" class="wrapper">
    <div id="daumRoughmapContainer1650444798200" class="root_daum_roughmap root_daum_roughmap_landing"></div>
  </div>
  <div id="footer">
    <p>Made by Hoie.Kim, Edited by Seonggu.Kim</p>
  </div>
</body>

<script>
  const dots = document.querySelector(".dots")
  const makedots = (n, i=0) => {
    if (i === n) return
    const element = document.createElement("span")
    element.classList.add("dot")
    dots.append(element)
    return makedots(n, i+1)
  }
  makedots(100)
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js"></script>
<%- include('./partials/calendar_script') %>
<%- include('./partials/gallery_style') %>
<%- include('./partials/calendar_style') %>
<%- include('./partials/style_invite') %>
<%- include('./partials/falling_dots') %>
<script charset="UTF-8" class="daum_roughmap_loader_script" src="https://ssl.daumcdn.net/dmaps/map_js_init/roughmapLoader.js"></script>
<script charset="UTF-8">
  const renderMap = () => {
    document.getElementById("daumRoughmapContainer1650444798200").innerHTML = ""
    const map = document.getElementById("map")
    const mapWidth = map.offsetWidth
    const mapHeight = window.innerHeight / 2
    new daum.roughmap.Lander({
		"timestamp" : "1650444798200",
		"key" : "29wje",
		"mapWidth" : mapWidth,
		"mapHeight" : mapHeight
	}).render();
  }

  renderMap()

  let isWide = true
  const resize = () => {
    if (window.innerWidth < 870 && isWide) {
      document.getElementById("title_ko").innerHTML = "김성구, 이예지의 결혼식에<br/>초대합니다!"
      document.getElementById("title_en").innerHTML = "Yeji Lee & Seonggu Kim:<br/>We're getting married!"
      isWide = false
    } else if (window.innerWidth >= 870 && !isWide){
      document.getElementById("title_ko").innerHTML = "김성구, 이예지의 결혼식에 초대합니다!"
      document.getElementById("title_en").innerHTML = "Yeji Lee & Seonggu Kim: We're getting married!"
      isWide = true
    }
  }

  resize()

  window.addEventListener("resize", resize)
  // const imagePopup = () => {
  //   $('.image-popup-vertical-fit').magnificPopup({
  //     type: 'image',
  //     mainClass: 'mfp-with-zoom', 
  //     gallery:{
  //         enabled:true
  //       },
  //     zoom: {
  //       enabled: true, 
  //       duration: 300, // duration of the effect, in milliseconds
  //       easing: 'ease-in-out', // CSS transition easing function
  //       opener: function(openerElement) {
  //         console.log(openerElement);
  //         return openerElement.is('img') ? openerElement : openerElement.find('img');
  //       }
  //     }
  //   });
  // }
  // imagePopup()
  // var elements = document.getElementsByClassName("image-popup-vertical-fit");

  // var myFunction = function() {
  //     var attribute = this.getAttribute("data-myattribute");
  //     alert(attribute);
  // };

  // for (var i = 0; i < elements.length; i++) {
  //     elements[i].addEventListener('click', imagePopup, false);
  // }
</script>

<script>
  function docReady(fn) {
    if (document.readyState === "complete" || document.readyState === "interactive") {
      setTimeout(fn, 1000);
    } else {
      document.addEventListener("DOMContentLoaded", () => {
        setTimeout(fn, 1000);
      });
    }
  } 
  docReady(() => {
    const loadingBar = document.getElementById("loading-bar")
    loadingBar.firstElementChild.style.width = "1500px"
    loadingBar.firstElementChild.style.opacity = 0
    setTimeout(() => {
      loadingBar.style.backgroundColor = "transparent"
      setTimeout(() => {
        loadingBar.remove()
      }, 300)
    }, 200)
  })
</script>